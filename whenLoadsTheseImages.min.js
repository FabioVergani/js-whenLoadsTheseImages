const onceWhen=(e,n,t)=>{const o=s=>{e.removeEventListener(n,o),t(s)};e.addEventListener(n,o)},safeLength=e=>e&&"length"in e?Math.max(0|e.length,0):0,whenLoadsTheseImages=(e,n=!1)=>{const t=Promise;return new t((o,s)=>{const h=e;let r=n?safeLength(h):h.length;if(0!==r){const e=[],n=[],s=Array(r);r=0;for(const o of h)(s[r]=(++r,new t(e=>{if(o.complete)e(o);else{const n=onceWhen,t=()=>e(o);n(o,"load",t),n(o,"error",t)}}))).then(t=>{const o=0!==t.naturalHeight?e:n;o[o.length]=t});t.all(s).then(t=>{o([e,n,t])})}else s(h)})};
